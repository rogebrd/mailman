(this.webpackJsonpmailman=this.webpackJsonpmailman||[]).push([[0],{117:function(e,t,n){},118:function(e,t,n){},125:function(e,t){},127:function(e,t){},137:function(e,t){},139:function(e,t){},166:function(e,t){},168:function(e,t){},169:function(e,t){},174:function(e,t){},176:function(e,t){},182:function(e,t){},184:function(e,t){},203:function(e,t){},215:function(e,t){},218:function(e,t){},224:function(e,t,n){"use strict";n.r(t);var i=n(3),c=n.n(i),a=n(111),s=n.n(a),o=(n(117),n(118),n(27)),l=n(0),r=function(){return Object(l.jsx)("div",{className:"sidebar-left",children:Object(l.jsx)("div",{className:"logo-holder",children:Object(l.jsxs)("svg",{className:"sidebar-logo",width:"34",height:"29",viewBox:"0 0 34 29",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(l.jsx)("path",{d:"M8.59248 0.424316L0.187012 5.7698L8.59248 11.1153L16.9994 5.7698L25.4048 11.1153L33.8103 5.7698L25.4048 0.424316L16.9994 5.7698L8.59248 0.424316Z",fill:"#F7F5F2"}),Object(l.jsx)("path",{d:"M8.59248 21.8064L0.187012 16.4609L8.59248 11.1153L16.9994 16.4609L8.59248 21.8064Z",fill:"#F7F5F2"}),Object(l.jsx)("path",{d:"M16.9994 16.4609L25.4048 11.1153L33.8103 16.4609L25.4048 21.8064L16.9994 16.4609Z",fill:"#F7F5F2"}),Object(l.jsx)("path",{d:"M16.9994 28.9336L8.59248 23.5881L16.9994 18.2426L25.4048 23.5881L16.9994 28.9336Z",fill:"#F7F5F2"})]})})})},m=function(){return Object(l.jsx)("div",{className:"sidebar-right",children:Object(l.jsx)("img",{className:"sidebar-right-image",src:"/mailman/sidebar-right.png",alt:"Dropbox Working"})})},d=function(e){var t=e.email,n=e.setEmail,i=e.onSubmit;return Object(l.jsxs)("div",{className:"email-input-wrapper",children:[Object(l.jsx)("svg",{className:"email-input-logo",width:"18",height:"14",viewBox:"0 0 18 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(l.jsx)("path",{d:"M0 0.25V11.5C0.000694729 12.0965 0.237971 12.6684 0.659777 13.0902C1.08158 13.512 1.65348 13.7493 2.25 13.75H15.75C16.3465 13.7493 16.9184 13.512 17.3402 13.0902C17.762 12.6684 17.9993 12.0965 18 11.5V0.25H0ZM15.4395 1.75L9 8.18913L2.5605 1.75H15.4395ZM15.75 12.25H2.25C2.05109 12.25 1.86032 12.171 1.71967 12.0303C1.57902 11.8897 1.5 11.6989 1.5 11.5V2.8105L9 10.3105L16.5 2.8105V11.5C16.5 11.6989 16.421 11.8897 16.2803 12.0303C16.1397 12.171 15.9489 12.25 15.75 12.25Z",fill:"#524A3E","fill-opacity":"0.78"})}),Object(l.jsx)("input",{className:"email-input",type:"text",placeholder:"Email Address",value:t,onChange:function(e){return n(e.target.value)}}),Object(l.jsx)("button",{className:"email-input-button",onClick:i,children:"Sign up"})]})},u=function(e){var t=e.email,n=e.setEmail,i=e.onSubmit,c=e.navigate;return Object(l.jsxs)("div",{className:"home",children:[Object(l.jsx)(r,{}),Object(l.jsxs)("div",{className:"content",children:[Object(l.jsxs)("div",{className:"content-top",children:[Object(l.jsx)("h1",{className:"title",children:"Save email and attachments to Dropbox"}),Object(l.jsxs)("p",{className:"page-subtitle",children:["Forward and save. It's that simple. ",Object(l.jsx)("button",{onClick:function(){return c("EMAIL")},className:"try-link",children:"Try it now"})]})]}),Object(l.jsx)("div",{className:"content-bottom",children:Object(l.jsx)(d,{email:t,setEmail:n,onSubmit:i})})]}),Object(l.jsx)(m,{})]})},j=function(e){var t=e.email,n=e.setEmail,i=e.onSubmit;return Object(l.jsxs)("div",{className:"home",children:[Object(l.jsx)(r,{}),Object(l.jsxs)("div",{className:"content-single content",children:[Object(l.jsx)("h1",{className:"single-title title",children:"Register an email address"}),Object(l.jsx)(d,{email:t,setEmail:n,onSubmit:i})]}),Object(l.jsx)(m,{})]})},b=function(e){var t=e.onSubmit;return Object(l.jsxs)("div",{className:"home",children:[Object(l.jsx)(r,{}),Object(l.jsxs)("div",{className:"content-single content",children:[Object(l.jsx)("h1",{className:"single-title title",children:"Authenticate with Dropbox"}),Object(l.jsx)("button",{className:"dropbox-button",onClick:t,children:"Sign in"})]}),Object(l.jsx)(m,{})]})},h=function(){return Object(l.jsxs)("div",{className:"sidebar-right",children:[Object(l.jsx)("img",{className:"sidebar-right-image-confirmation",src:"/mailman/email-folder.png",alt:"Dropbox Folder"}),Object(l.jsxs)("p",{className:"sidebar-right-confirmation-text",children:["Psst... your emails will be stored in the new ",Object(l.jsx)("a",{href:"/",className:"email-folder-link",children:"Emails folder"})," in Files"]})]})},x=function(){return Object(l.jsxs)("div",{className:"home",children:[Object(l.jsx)(r,{}),Object(l.jsxs)("div",{className:"content-single content",children:[Object(l.jsxs)("svg",{width:"94",height:"94",viewBox:"0 0 94 94",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(l.jsx)("path",{d:"M81.947 12.053C73.95 4.055 62.192 0 47 0C31.808 0 20.05 4.055 12.053 12.053C4.056 20.051 0 31.809 0 47C0 62.191 4.055 73.949 12.053 81.947C20.051 89.945 31.808 94 47 94C62.192 94 73.95 89.945 81.947 81.947C89.944 73.949 94 62.191 94 47C94 31.809 89.945 20.051 81.947 12.053ZM47 88C19.794 88 6 74.206 6 47C6 19.794 19.794 6 47 6C74.206 6 88 19.794 88 47C88 74.206 74.206 88 47 88Z",fill:"#F7F5F2"}),Object(l.jsx)("path",{d:"M40.8782 67.1213L72.8782 35.1213L68.6355 30.8787L40.8784 58.6358L25.1213 42.8787L20.8787 47.1213L40.8782 67.1213Z",fill:"#F7F5F2"})]}),Object(l.jsx)("h1",{className:"no-padding single-title title",children:"Check your email to begin"}),Object(l.jsx)("p",{className:"single-title page-subtitle",children:"Send any email to save it and any attachments"}),Object(l.jsxs)("div",{className:"email-input-wrapper",children:[Object(l.jsx)("svg",{className:"email-input-logo",width:"18",height:"14",viewBox:"0 0 18 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(l.jsx)("path",{d:"M0 0.25V11.5C0.000694729 12.0965 0.237971 12.6684 0.659777 13.0902C1.08158 13.512 1.65348 13.7493 2.25 13.75H15.75C16.3465 13.7493 16.9184 13.512 17.3402 13.0902C17.762 12.6684 17.9993 12.0965 18 11.5V0.25H0ZM15.4395 1.75L9 8.18913L2.5605 1.75H15.4395ZM15.75 12.25H2.25C2.05109 12.25 1.86032 12.171 1.71967 12.0303C1.57902 11.8897 1.5 11.6989 1.5 11.5V2.8105L9 10.3105L16.5 2.8105V11.5C16.5 11.6989 16.421 11.8897 16.2803 12.0303C16.1397 12.171 15.9489 12.25 15.75 12.25Z",fill:"#524A3E","fill-opacity":"0.78"})}),Object(l.jsx)("p",{className:"copy email-input",children:"dropbox.mailman@gmail.com"}),Object(l.jsx)("button",{className:"copy email-input-button",onClick:function(){return function(e){var t=document.createElement("textarea");t.value=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t)}("dropbox.mailman@gmail.com")},children:"Copy"})]})]}),Object(l.jsx)(h,{})]})},O=n(112),f=function(){var e=c.a.useState("HOME"),t=Object(o.a)(e,2),n=t[0],i=t[1],a=c.a.useState(""),s=Object(o.a)(a,2),r=s[0],m=s[1],d=c.a.useState(null),h=Object(o.a)(d,2),f=h[0],p=h[1],g=c.a.useState(null),v=Object(o.a)(g,2),w=v[0],C=v[1],L=function(){""!==r&&i("DROPBOX")},N=function(){var e=new O.DropboxAuth({clientId:"69qj4b6vw1zwn45"});p(e),e.getAuthenticationUrl("https://rogebrd.github.io/mailman/","","code","legacy",null,"none",!0).then((function(e){var t=window.open(e,"Mailman Authentication",{toolbar:"no",menubar:"no",width:600,height:800,top:100,left:100});C(t)})).catch((function(e){console.error(e)}))};c.a.useEffect((function(){if(!w){var e=window.location.href;if(e){var t=new URL(e).searchParams.get("code");t&&(window.opener.postMessage({code:t,sender:"Dropbox Authentication Popup"}),window.close())}}}),[w]);var F=c.a.useCallback((function(e){if(f){var t=e.data;t.sender&&"Dropbox Authentication Popup"===t.sender&&f.getAccessTokenFromCode("https://rogebrd.github.io/mailman/",t.code).then((function(e){var t=e.result,n="".concat("https://duv3a4ynni.execute-api.us-west-2.amazonaws.com","/prod/api?email=").concat(r,"&dropbox_oauth_token=").concat(t.access_token);fetch(n,{method:"POST"}).then((function(e){i("CONFIRMATION")})).catch((function(e){console.error(e)}))})).catch((function(e){console.error(e)}))}}),[f,r]);c.a.useEffect((function(){return window.addEventListener("message",F),function(){return window.removeEventListener("message",F)}}),[F]);return Object(l.jsx)(l.Fragment,{children:function(){switch(n){case"HOME":return Object(l.jsx)(u,{email:r,setEmail:m,onSubmit:L,navigate:i});case"EMAIL":return Object(l.jsx)(j,{email:r,setEmail:m,onSubmit:L});case"DROPBOX":return Object(l.jsx)(b,{onSubmit:N});case"CONFIRMATION":return Object(l.jsx)(x,{});case"ERROR":default:return Object(l.jsx)(u,{})}}()})};var p=function(){return Object(l.jsx)("div",{className:"App",children:Object(l.jsx)(f,{})})},g=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,225)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),i(e),c(e),a(e),s(e)}))};s.a.render(Object(l.jsx)(c.a.StrictMode,{children:Object(l.jsx)(p,{})}),document.getElementById("root")),g()}},[[224,1,2]]]);
//# sourceMappingURL=main.eb4a99b1.chunk.js.map